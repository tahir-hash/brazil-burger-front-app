<mtm-header-admin></mtm-header-admin>
<div class="content-wrapper">
   <div class="container mt-5">
    <h1 class="text-center ">Ajouter un menu</h1>
    <form [formGroup]="menu" (ngSubmit)="submitData()" enctype="multipart/form-data" >
        <div class="form-group mb-4">
            <label for=""><strong>Nom du menu</strong></label>
            <input formControlName="nom"  type="text" class="border-dark form-control">
            <ng-container *ngIf="nom.invalid && nom.touched">
                <span *ngIf="nom.errors?.required" style="color: red;">
                    Le nom est obligatoire
                </span>
            </ng-container>
        </div>
        <div class="choice" >
           <div class="d-flex">
            <div (click)="panel=!panel" class="accordion mb-2 p-1 w-100">
                <label for=""><strong>Definir les burgers</strong></label>
            </div>
            <i (click)="add('burger')" data-toggle="tooltip"
            data-placement="bottom"
            title="Ajouter" style="color: #28A745;" class="bi bi-plus-lg fa-2x"></i>
           </div>
            <ng-container *ngIf="panel">
                <ng-container formArrayName="menuBurgers">
                    <ng-container *ngFor="let burgerForm of menuBurgers.controls; let i = index">
                        <mtm-add-menu [i]="i" (indexChanged)="delete(i,'burger')" [form]="burgerForm" [burgers]="object.burgers"></mtm-add-menu>
                    </ng-container>
                </ng-container>
            </ng-container> 
        </div>
        <div class="choice">
            <div class="d-flex">
                <div (click)="panelT=!panelT" class="accordion mb-2 p-1 w-100">
                    <label for=""><strong>Definir les Tailles</strong></label>
                </div>
                <i (click)="add('taille')" data-toggle="tooltip"
                data-placement="bottom"
                title="Ajouter" style="color: #28A745;" class="bi bi-plus-lg fa-2x"></i>
               </div>
            <ng-container *ngIf="panelT">
                <ng-container formArrayName="menuTailles">
                    <ng-container *ngFor="let tailleForm of menuTailles.controls; let i = index">
                        <mtm-add-menu (indexChanged)="delete(i,'tailles')" [i]="i" [form]="tailleForm" [tailles]="object.tailles"></mtm-add-menu>
                    </ng-container>
                </ng-container>
            </ng-container> 
        </div>
        <div class="choice">
            <div class="d-flex">
                <div (click)="panelF=!panelF" class="accordion mb-2 p-1 w-100">
                    <label for=""><strong>Definir les portions</strong></label>
                </div>
                <i (click)="add('frites')" data-toggle="tooltip"
                data-placement="bottom"
                title="Ajouter" style="color: #28A745;" class="bi bi-plus-lg fa-2x"></i>
               </div>
            <ng-container *ngIf="panelF">
                <ng-container formArrayName="menuPortionFrites">
                    <ng-container *ngFor="let friteForm of menuPortionFrites.controls; let i = index">
                        <mtm-add-menu (indexChanged)="delete(i,'frites')" [i]="i"  [form]="friteForm" [frites]="object.frites"></mtm-add-menu>
                    </ng-container>
                </ng-container>
            </ng-container> 
        </div>
        <div class="form-group mb-4">
            <label for=""><strong>Image</strong></label>
            <input formControlName="imageFile" accept="image/*"   type="file" class="border-dark form-control"
            (change)="onFileChange($event)">
            
        </div>
        <div class="form-group mb-4">
            <label for=""><strong>Description</strong></label>
            <textarea formControlName="description" class="form-control" id="textAreaExample3" rows="2"></textarea>
            <ng-container *ngIf="description.invalid && description.touched">
                <span *ngIf="description.errors?.required" style="color: red;">
                    La description est obligatoire
                </span>
            </ng-container>
        </div>
        <!-- <input type="hidden" formControlName="prix" value=0> -->
        <button  class="submit mt-4 mb-3"  data-toggle="tooltip" data-placement="bottom" title="Submit">
            <h5 class="mb-1 mt-1">Submit</h5>
        </button>
    </form>
   </div>
</div>